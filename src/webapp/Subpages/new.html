<div id="mffer-new">
	<div id="mffer-new-check-progress">
		<h2>Checking existing configuration</h2>
		<p>
			<code>mffer</code> configuration doesn't appear to be complete.
			Please wait while we see what needs to be done. Thank you for your
			patience.
		</p>
		<p class="spinner"></p>
	</div>
	<div id="mffer-new-intro" class="start-inactive">
		<h2>Welcome.</h2>
		<p>No existing <code>mffer</code> configuration was found.</p>
		<p>
			<code>mffer</code> is designed to be run as a web app on the Google
			Cloud Platform. To deploy the application as a project of your own,
			you must register it as an OAuth 2.0 client, add your own API key,
			and set up a Google Sheet for storage.
		</p>
		<p>
			If you just want to use the web app, you don't need to do this: just
			visit <a href="https://mffer.org">mffer.org</a>.
		</p>
		<p>
			If you want to run, build, modify, or test the command-line
			<code>mffer</code> program, which is used for extracting data and
			reporting it in a way the web app can use, you may not need to do
			this: visit
			<a href="https://github.com/therealchjones/mffer"
				><code>mffer</code> on GitHub</a
			>.
		</p>
		<form>
			<p>
				However, if you want to modify and test the web app or deploy a
				version yourself, then
			</p>
			<button id="button-start-new-deployment" type="button">
				Get Started
			</button>
		</form>
	</div>
	<div id="mffer-new-get-keys" class="start-inactive">
		<h2>Set up Google Apps Script and Google Cloud Platform</h2>
		<p>
			They're probably at least <em>partly</em> configured if you've
			gotten this far. For the webapp to work properly, you'll need to
			ensure those are complete by following the development guide's
			<a
				href="http://github.com/therealchjones/mffer/docs/Deployment.md#deploying-the-webapp"
				target="_blank"
				>"Deploying the webapp" instructions</a
			>
			then entering the below credentials.
		</p>
		<form id="mffer-new-keys">
			<label for="input-picker-key">Google Picker API Key</label>
			<input type="text" id="input-picker-key" />
			<label for="input-oauth-id">OAuth 2.0 Client ID</label>
			<input type="text" id="input-oauth-id" />
			<label for="input-oauth-secret">OAuth 2.0 Secret</label>
			<input type="text" id="input-oauth-secret" />
			<button type="submit" id="button-api-key">
				Use these settings
			</button>
		</form>
	</div>
	<div id="mffer-new-get-authorization" class="start-inactive">
		<p>
			To allow OAuth 2.0 authentication, the OAuth process requires a
			destination to follow the authentication process. Open the <a
			target="_blank" id="mffer-new-oauth-link">OAuth 2.0 Client Settings</a> and enter the script's
			redirect URI in the "Authorized redirect URIs" section:</p>
		<dl>
			<dt>
				OAuth redirect URI:
				<dd>
					https://script.google.com/macros/d/<?= getScriptId()
					?>/usercallback</dd>
			</dt>
		</dl>
		</p>

		<p>Once that is complete, grant authorization to browse your Google Drive.</p>
		<p><a id="mffer-auth-link" href="">Authorize</a></p>
	</div>
	<div id="mffer-new-get-database" class="start-inactive">
		<h2>Load the <code>mffer</code> data</h2>
		<p>
			Choose an existing <code>mffer</code> Google Sheet or upload a file
			generated by the <code>mffer</code> command line tool.
		</p>
		<form id="mffer-choose-database">
			<button type="button" id="button-choose-sheet">
				Load existing database
			</button>
			<button type="button" id="button-upload-data">
				Upload <code>mffer</code> data
			</button>
		</form>
	</div>
	<div id="mffer-new-done" class="start-inactive">
		<h2><code>mffer</code> configuration complete</h2>
		<a href="" id="mffer-new-url"
			>Start using this <code>mffer</code> deployment</a
		>
	</div>
	<div id="mffer-new-progress-table">
		<table>
			<tr>
				<td>Google OAuth2 ID stored</td>
				<td id="mffer-new-progress-oauthSecret"></td>
			</tr>
			<tr>
				<td>Google OAuth2 secret stored</td>
				<td id="mffer-new-progress-oauthId"></td>
			</tr>
			<tr>
				<td>Google Picker API connected</td>
				<td id="mffer-new-progress-pickerKey"></td>
			</tr>
			<tr>
				<td>Google Drive authorized</td>
				<td id="mffer-new-progress-authorization"></td>
			</tr>
			<tr>
				<td>Google Sheet connected</td>
				<td id="mffer-new-progress-spreadsheetId"></td>
			</tr>
		</table>
	</div>
</div>
