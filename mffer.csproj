<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net5.0</TargetFramework>
	<GenerateDocumentationFile>true</GenerateDocumentationFile>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="MessagePack" Version="2.2.85" />
    <PackageReference Include="AssetsTools" Version="0.1.2" />
  </ItemGroup>

  <PropertyGroup>
	<ToolsDirectory>$(MSBuildProjectDirectory)/tools</ToolsDirectory>
  </PropertyGroup>

  <Target Name="RestoreTools" AfterTargets="Restore">
	<Exec Command="dotnet tool restore" WorkingDirectory="$(ToolsDirectory)"/>
	<Exec Command="npm install" WorkingDirectory="$(ToolsDirectory)"/>
  </Target>

  <Target Name="CleanTools" AfterTargets="Clean">
    <RemoveDir Directories="$(ToolsDirectory)/.nuget;$(ToolsDirectory)/node_modules"/>
	<Delete Files="$(ToolsDirectory)/package-lock.json"/>
  </Target>
  <Target Name="BetterClean" AfterTargets="Clean">
    <RemoveDir
    Directories="$(MSBuildProjectDirectory)/bin;$(MSBuildProjectDirectory)/obj;$(MSBuildProjectDirectory)/release"/>
  </Target>
</Project>
